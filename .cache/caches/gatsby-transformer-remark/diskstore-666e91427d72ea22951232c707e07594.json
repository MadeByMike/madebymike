{"expireTime":9007200803979237000,"key":"transformer-remark-markdown-html-3441f27f92b80ea3a07c3ed89a79119e-gatsby-remark-prismjs-","val":"<p>With a \"zero element\" loading animation, a loading state can be applied to any element with just the addition of a class name.</p>\n<div class=\"row\">\n  <div class=\"col col-6\">\n    <a href=\"http://codepen.io/MadeByMike/pen/LEbYgr?editors=110\">\n      <div class=\"loading horizontal-example\"></div>\n    </a>\n    <p class=\"caption\"><a href=\"http://codepen.io/MadeByMike/pen/LEbYgr?editors=110\">view examples on codepen</a></p>\n  </div>\n  <div class=\"col col-6\">\n    <a href=\"http://codepen.io/MadeByMike/pen/bNeyEj?editors=110\">\n      <div class=\"loading radial-example\"></div>\n    </a>\n    <p class=\"caption\"><a href=\"http://codepen.io/MadeByMike/pen/bNeyEj?editors=110\">view examples on codepen</a></p>\n  </div>\n</div>\n<p>First of all, I'm not a huge fan of loading animations and neither are your users but sometimes, for various reasons an action is going to take time and we need to let people know we're working on it. So if we must use a loading animation we want it to have a light footprint and be easy to toggle on and off when and where we need it.</p>\n<p>I've seen a lot of css only loading animations. A quick search on CodePen will find thousands of examples. They are popular because they are relatively quick and easy to make, yet can be creatively challenging and the result is usually visually pleasing. These type of experiments are fun and can be a rewarding and worthwhile exercise, but the practicality of many examples is more questionable.</p>\n<p>There are definite benefits to css only solutions such as improving the number of network requests, page weight and animation performance. But in my opinion these benefits are often outweighed by the need to insert a div soup into the mark-up. Not only that, positioning a css only \"spinner\" can be challenging, it often requires changes to the surrounding mark-up to avoid breaking the layout.</p>\n<p>Perhaps slightly more practical are the \"single element\" examples. They tend to be a bit more robust and whilst it's simple enough to toggle a single element to show and hide the loading animation, I don't like toggling element visibility or adding and removing elements with JavaScript. To me this seems to defeat the purpose of a CSS only solution. It feels like the correct way to approach a css loading animation would be for it to work simply by adding a class name such as <code class=\"language-text\">loading</code> to an element to indicate that it's in a loading state.</p>\n<p>After all loading is a \"describing word\", it indicates the state of something and is not an object itself. Maybe it is a little silly to think we should apply this logic to our mark-up, but it feels right to me. So I set out to make a \"zero element\" loading animation, one that can be applied simply by adding a class name.</p>\n<p>I eventually settled on a solution that works almost everywhere. There are only 2 conditions. The element we're adding the loading animation to:</p>\n<ul>\n<li>cannot have <code class=\"language-text\">:before</code> or <code class=\"language-text\">:after</code> pseudo-elements applied</li>\n<li>must be possible to change the <code class=\"language-text\">position</code> property to <code class=\"language-text\">relative</code></li>\n</ul>\n<p>This works in every situation I’ve ever needed a loading animation but if we want to apply this technique to an element that requires absolute positioning or already has pseudo-elements, it’s usually possible to add the loading class to a container or child element.</p>\n<h2>How it works</h2>\n<p>This technique works by using <code class=\"language-text\">:before</code> and <code class=\"language-text\">:after</code> pseudo-elements to create the different parts of the animation. CSS transformations and absolute positioning are applied and these properties are animated to create different types of loading indicators.</p>\n<p>The difficult part is working out how to position and animate the various parts, taking into account the width, height, borders and css transformations.</p>\n<p>For a typical horizontal loading animation we can work this out without too much trouble but to create a smooth radial animation or anything more complex you will probably want to rely on something like sass or a generator.</p>\n<p>If you want to understand how it works let’s look at making a simple horizontal example.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.loading</span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>255,255,255,.8<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.loading:before</span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span><span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* centre everything */</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%, -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> solid 1px #000<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.loading:after</span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span><span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* centre everything */</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%, -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> solid 5px #000<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 28px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 28px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>With the above css we can add a class name <code class=\"language-text\">loading</code> to any element on the page and we should get something like the following, positioned in the centre:</p>\n<img style=\"margin: 0 auto; display:block;\" src=\"/img/zero-element-example.png\">\n<p>If you want to apply this to the whole page, by applying the class name to the body element, you will also need to add the following css:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">html, body</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>To complete the loading animation we need to move the circle back and forward along the bar.</p>\n<p>To our circle add the following css:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.loading:after</span><span class=\"token punctuation\">{</span>\n\n  ...\n\n  <span class=\"token property\">-webkit-animation</span><span class=\"token punctuation\">:</span> loading 3s ease-in-out infinite alternate<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> loading 3s ease-in-out infinite alternate<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Important animation properties in this example are the <code class=\"language-text\">animation-timing-function</code> and <code class=\"language-text\">animation-direction</code>. For the timing function I selected <code class=\"language-text\">ease-in-out</code> which causes it to slow before changing direction, although <code class=\"language-text\">linear</code> also works, however for this example the animation direction must be set to <code class=\"language-text\">alternate</code>. Next we add the animation keyframes.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> loading</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-99px, -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>71px, -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@-webkit-keyframes</span> loading</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-99px, -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>71px, -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For the animation keyframes we translate the position of the circle so that is starts with its left edge against the left edge of the bar and ends with its right edge against the right edge of the bar. We also need to translate the vertical position by <code class=\"language-text\">-50%</code> to maintain its vertical centring. We do not change the vertical position in this animation.</p>\n<p>Without any transformations applied, the left edge of the circle is positioned in the centre of the bar. Since we know the width of the bar is 200px, to position the left edge of the circle against the left edge of the bar we need to move it <code class=\"language-text\">-100px</code> horizontally. So why in the example do I have <code class=\"language-text\">-99px</code>? This is simply because I want the circle to bounce against the inside edge of the bar. In the css I have <code class=\"language-text\">box-sizing: border-box;</code> applied to the bar so I need to account for the border width. It’s barely noticeable with a border width of 1px but with a thick border it will make a difference. This is the same reason the width and height of the circle are <code class=\"language-text\">28px</code> rather than <code class=\"language-text\">30px</code>.</p>\n<p>The full calculation for the first keyframe is:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">-(half the width of the bar - border width of the bar)\n-(100 - 1) = -99</code></pre></div>\n<p>For the final keyframe the calculation is similar however as already stated positions in css are relative to the top left corner of the element, so we need to take off the width of the circle.</p>\n<p>The full calculation is for the final keyframe is:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(half the width of the bar - border width of the bar – width of circle)\n100-1-28 = 71</code></pre></div>\n<p><strong>Note</strong>: You might not want to confine the circle to the inner width of the bar. Take a look at some of the examples I’ve done in the links at end of this article.</p>\n<p>You can of course change the sizes and colors to suit your preferences, as well as the border width or other properties, just remember if you change these adjust the calculations accordingly.</p>\n<p>If you’d like to make a horizontal zero element loading animation you can, <a href=\"http://codepen.io/MadeByMike/pen/6fced0cf51ce07ef6833aa775d254652\">fork my zero element animation boilerplate</a>.</p>\n<p>This is of course only one possible type of loading animation. There are plenty of alternatives that could be made using the same technique.</p>\n<p>I’ve created some other examples such as a radial loading animation - I'll admit, this one generates some lengthy css, but in most cases it is still smaller than an image or even an SVG. To create more complex animations like this you are going to need a preprocessor or some kind of script to generate the keyframes. Otherwise minor changes are going to result in a significant re-calculations and this is not something you would want to do by hand.</p>\n<p>Please let me know on <a href=\"https://twitter.com/MikeRiethmuller\">twitter</a> if you find this useful, if you have some more examples or if you have any questions. I'll be happy to add your examples here.</p>\n<h2>Examples</h2>\n<ul>\n<li><a href=\"http://codepen.io/MadeByMike/pen/LEbYgr?editors=110\">Horizontal zero element loaders</a></li>\n<li><a href=\"http://codepen.io/MadeByMike/pen/bNeyEj?editors=110\">Radial loaders zero element</a></li>\n</ul>"}