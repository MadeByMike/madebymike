{"expireTime":9007200803979237000,"key":"transformer-remark-markdown-html-31884b4ce83c1daf52abe6af97d84184-gatsby-remark-prismjs-","val":"<p>If you've worked with the css transition events in JavaScript you will know that it's a little involved due to the need for multiple browser prefixes. Luckily it's easy, if slightly verbose, to detect which transition event to use:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token comment\">// Dave Walsh says this is from Modernizr, but I can't find it</span>\n  <span class=\"token comment\">// http://davidwalsh.name/css-animation-callback</span>\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">whichTransitionEvent</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> t<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fakeelement'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> transitions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'transition'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'transitionend'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'OTransition'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'oTransitionEnd'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'MozTransition'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'transitionend'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'WebkitTransition'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'webkitTransitionEnd'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>t <span class=\"token keyword\">in</span> transitions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> undefined <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> transitions<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> transitionEvent <span class=\"token operator\">=</span> <span class=\"token function\">whichTransitionEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// With that sorted...</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>transitionEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>transitionEvent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t  <span class=\"token comment\">// do stuff here</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>We need to check if <code class=\"language-text\">transitionEvent</code> exists before adding an event listener and whilst this isn't too hard, we could take this a step further and wrap it with a custom event <code class=\"language-text\">&#39;transition-end&#39;</code>. See: <a href=\"https://gist.github.com/MadeByMike/0563ca51e08a790e553b\">example gist</a>.</p>\n<p>My reason for this extra step, apart from easy of use, relates to detecting transition start.</p>\n<h2>What about transition start?</h2>\n<p>Unfortunately there is no transition start event and it might at first seem like this is not much of a problem. A css transition is usually triggered by an event such as resize or hover and these events can be captured with JavaScript. But that is not always the case, at times it is difficult if not impossible to tell when a particular transition is triggered.</p>\n<p>The following example demonstrates a likely use case with the popular Foundation library and the <a href=\"http://foundation.zurb.com/docs/components/equalizer.html\">Equalizer</a> component.</p>\n<p data-height=\"650\" data-theme-id=\"6646\" data-slug-hash=\"ImxHA\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='http://codepen.io/MadeByMike/pen/ImxHA/'>Foundation Equalizer and the problem with CSS Transitions</a> by Mike (<a href='http://codepen.io/MadeByMike'>@MadeByMike</a>) on <a href='http://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n<p>In the demo Equalizer changes the boxes so they are even height. The height is re-calculated when the browser is resized, but when the container is resized as part of a css transition the height will not be re-calculated and content will overflow the boxes.</p>\n<p>I've exaggerated the transitions in the example to demonstrate.</p>\n<p>Detecting transtionend and calling <code class=\"language-text\">$(document).foundation(&#39;equalizer&#39;,&#39;reflow&#39;);</code> will set the height correctly at the end of the transition but it is not a smooth experience.</p>\n<p>Although not the ideal method I'd like, I've come up with a solution for detecting transition start. By wrapping the transitionend event with a custom event we can use transitionend in a sneaky way to detect a transition start.</p>\n<p data-height=\"500\" data-theme-id=\"6646\" data-slug-hash=\"sBjzn\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='http://codepen.io/MadeByMike/pen/sBjzn/'>Detect transition start </a> by Mike (<a href='http://codepen.io/MadeByMike'>@MadeByMike</a>) on <a href='http://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n<p>As I said, it is not ideal. It requires some specific css with a 0.00001s transition to detect the transition start.</p>\n<p>I'm looking forward to finding a better method. If you do let me know.</p>"}